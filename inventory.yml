all:
  vars:
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no'
    ansible_ssh_private_key_file: "/home/anton/Work/altdomain-stand/altdomain"
    ansible_user: root

    dc1_ipv4: "10.9.114.10"
    resolv_files:
      - "/etc/net/ifaces/{{ ansible_default_ipv4.interface }}/resolv.conf"
      - "/etc/resolv.conf"


  hosts:
    dc1: 
      ansible_host: "{{dc1_ipv4}}"
    dc2:
      ansible_host: "10.9.114.11"
    rodc:
      ansible_host: "10.9.114.12"
    srv1c:
      ansible_host: "10.9.114.18"
    mail:
      ansible_host: "10.9.114.20"
      ansible_remote_tmp: /tmp
    dns:
      ansible_host: "10.9.114.25"
    logs:
      ansible_host: "10.9.114.21"
    srv:
      ansible_host: "10.9.114.17"
      ansible_remote_tmp: /tmp
    nextcloud:
      auth_backend: "sssd"
      ansible_remote_tmp: /tmp
      ansible_host: "10.9.114.15"
    wksp10:
      ansible_host: "10.9.114.105"
    balancer1:
      ansible_host: "10.9.114.30"
      balancer_role: "MASTER"
      balancer_prio: "100"
    balancer2:
      ansible_host: "10.9.114.31"
      balancer_role: "SLAVE"
      balancer_prio: "101"
    glpi:
      ansible_host: "10.9.114.16"
      ansible_remote_tmp: /tmp
    redos1:
      ansible_host: "10.9.114.106"
    astra1:
      ansible_host: "10.9.114.107"
      ansible_python_interpreter: "/usr/bin/python3"
    backup:
      ansible_host: "10.9.114.19"
      ansible_remote_tmp: /tmp


  
  children:
    dc_group:
      hosts:
        dc1:
          create_users:
            - { "name": "sogo", "password": "Qwerty1", "email": "", "expired": "no" }
            - { "name": "vmail", "password": "Qwerty1", "email": "", "expired": "no" }
            - { "name": "ivanov", "password": "Qwerty1", "email": "ivanov@{{dc_realm}}", "expired": "no" }
            - { "name": "petrov", "password": "Qwerty1", "email": "petrov@{{dc_realm}}", "expired": "no" }
            - { "name": "sidorov", "password": "Qwerty1", "email": "sidorov@{{dc_realm}}", "expired": "no" }
        dc2:
        rodc:

    dhcp_group:
      hosts:
        dc1:
          kea_ha_role: "primary"
        dc2:
          kea_ha_role: "standby"

    srv1c_group:
      vars:
        auth_backend: "winbind"
      hosts:
        srv1c:

    mail_group:
      hosts:
        mail:

    dns_group:
      hosts:
        dns:

    srv_group:
      vars:
        auth_backend: "sssd"
      hosts:
        srv:

    logs_group:
      vars:
        auth_backend: "sssd"
      hosts:
        logs:
          
    clients_group:
      vars:
        domain_gpo: "yes"
      hosts:
        wksp10:
        redos1:
        astra1:

    balancer_group:
      vars:
        balancer_virtual_ip: "10.9.114.35"
      hosts:
        balancer1:
        balancer2:

    glpi_group:
      hosts:
        glpi:

    backup_group:
      hosts:
        backup:

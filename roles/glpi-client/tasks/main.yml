#SPDX-License-Identifier: MIT-0
---
# tasks file for glpi-client


- name: Import OS specific vars
  include_vars: "{{ ansible_distribution }}/main.yml"

- name: install glpi-agent for ALT OS
  ansible.builtin.include_tasks: alt.yml
  when: ansible_distribution == "Altlinux"

  # for 1.8 tested only
- name: install glpi-agent for Astra
  ansible.builtin.include_tasks: astra.yml
  when: ansible_distribution == "Astra Linux" and  ansible_distribution_release == "1.8_x86-64"

- name: install glpi-agent for RedOS
  ansible.builtin.include_tasks: red.yml
  when: ansible_distribution == "RED"

- name: install glpi-agent for Debian and clones
  ansible.builtin.include_tasks: deb.yml
  when: ansible_distribution in deb_clone
  
- name: install glpi-agent for RedHat and clones
  ansible.builtin.include_tasks: rh.yml
  when: ansible_distribution in rh_clone

- name: start glpi-agent service
  service:
    name: "{{item}}"
    state: restarted
    enabled: yes
  with_items:
    - glpi-agent
  tags: glpi_client

